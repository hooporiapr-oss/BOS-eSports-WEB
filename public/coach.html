<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="Talk to Coach BOS â€” Your AI Sideline Coach. GET COACHED.â„¢ BOS Esports">
  <title>Coach BOS â€” GET COACHED.â„¢</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --display:'Bebas Neue',sans-serif;
      --sans:'Outfit',sans-serif;
      --dark:#0a0a0f;--darker:#050508;--card:#111118;--card-hover:#16161f;
      --gold:#FFD700;--gold-dim:rgba(255,215,0,0.08);--gold-glow:rgba(255,215,0,0.3);
      --orange:#FF6B35;--teal:#00D9A5;--cyan:#00CED1;--red:#FF1744;
      --text:#FFFFFF;--muted:#8892a0;--border:rgba(255,255,255,0.08);
      --radius:20px
    }
    html,body{height:100%;overflow:hidden}
    body{font-family:var(--sans);background:var(--dark);color:var(--text);-webkit-font-smoothing:antialiased;display:flex;flex-direction:column}

    /* â•â•â• LANG TOGGLE â•â•â• */
    body.en .es{display:none!important}body.es .en{display:none!important}

    /* â•â•â• AMBIENT BG â•â•â• */
    .bg{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
    .bg::before{content:'';position:absolute;top:-20%;left:50%;transform:translateX(-50%);width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(255,215,0,0.06) 0%,transparent 60%)}
    .bg::after{content:'';position:absolute;bottom:-15%;right:-10%;width:400px;height:400px;border-radius:50%;background:radial-gradient(circle,rgba(0,217,165,0.04) 0%,transparent 55%)}
    .bg-grid{position:absolute;inset:0;background:linear-gradient(rgba(255,215,0,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,215,0,0.02) 1px,transparent 1px);background-size:60px 60px;mask-image:radial-gradient(ellipse 60% 50% at 50% 30%,black 10%,transparent 70%);-webkit-mask-image:radial-gradient(ellipse 60% 50% at 50% 30%,black 10%,transparent 70%)}

    /* â•â•â• HEADER â•â•â• */
    .hdr{display:flex;align-items:center;gap:12px;padding:12px 16px;background:rgba(5,5,8,0.9);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid var(--border);position:relative;z-index:10;flex-shrink:0}
    .hdr-back{display:flex;align-items:center;justify-content:center;width:38px;height:38px;border-radius:12px;background:var(--card);border:1px solid var(--border);font-size:16px;text-decoration:none;color:var(--text);-webkit-tap-highlight-color:transparent;transition:all .15s;flex-shrink:0}
    .hdr-back:active{transform:scale(.9)}
    .hdr-av{width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--orange));display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0;box-shadow:0 0 24px rgba(255,215,0,0.25);position:relative}
    .hdr-av::after{content:'';position:absolute;inset:-3px;border-radius:50%;border:1.5px solid rgba(255,215,0,0.15);animation:ring 3s ease infinite}
    @keyframes ring{0%,100%{transform:scale(1);opacity:.4}50%{transform:scale(1.08);opacity:0}}
    .hdr-info{flex:1;min-width:0}
    .hdr-name{font-family:var(--display);font-size:18px;letter-spacing:2px;line-height:1;background:linear-gradient(135deg,var(--gold),var(--orange));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hdr-status{display:flex;align-items:center;gap:5px;margin-top:3px}
    .hdr-dot{width:7px;height:7px;border-radius:50%;background:var(--teal);animation:pulse 2s ease infinite;box-shadow:0 0 10px rgba(0,217,165,0.4)}
    @keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(0,217,165,.4)}50%{box-shadow:0 0 0 5px rgba(0,217,165,0)}}
    .hdr-stat{font-size:11px;color:var(--muted);font-weight:600}
    .hdr-lang{width:32px;height:32px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--muted);font-size:10px;font-weight:800;letter-spacing:.5px;display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all .15s;flex-shrink:0}
    .hdr-lang:active{transform:scale(.9);color:var(--gold);border-color:rgba(255,215,0,.2)}
    .hdr-share{width:34px;height:34px;border-radius:10px;border:1px solid var(--border);background:var(--card);color:var(--muted);font-size:16px;display:flex;align-items:center;justify-content:center;cursor:pointer;-webkit-tap-highlight-color:transparent;transition:all .15s;flex-shrink:0}
    .hdr-share:active{transform:scale(.9);color:var(--gold)}

    /* â•â•â• CHAT AREA â•â•â• */
    .chat{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:10px;position:relative;z-index:1;-webkit-overflow-scrolling:touch;scroll-behavior:smooth}
    .chat::-webkit-scrollbar{width:3px}
    .chat::-webkit-scrollbar-thumb{background:rgba(255,255,255,.06);border-radius:10px}

    /* â•â•â• WELCOME â•â•â• */
    .hero{text-align:center;padding:28px 16px;animation:fadeUp .6s ease}
    @keyframes fadeUp{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
    .hero-av{width:88px;height:88px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--orange));display:flex;align-items:center;justify-content:center;font-size:42px;margin:0 auto 14px;box-shadow:0 8px 40px rgba(255,215,0,0.25);animation:float 5s ease-in-out infinite}
    @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-5px)}}
    .hero-title{font-family:var(--display);font-size:28px;letter-spacing:4px;line-height:1;margin-bottom:4px}
    .hero-title .gold{color:var(--gold)}
    .hero-coached{font-family:var(--display);font-size:16px;letter-spacing:5px;color:var(--gold);margin-bottom:10px;opacity:.8}
    .hero-coached .tm{font-family:var(--sans);font-size:.5em;vertical-align:super;letter-spacing:0}
    .hero-sub{font-size:13px;color:var(--muted);line-height:1.6;max-width:320px;margin:0 auto;font-weight:400}
    .chips{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:18px}
    .chip{padding:9px 16px;border-radius:60px;background:rgba(255,215,0,0.06);border:1px solid rgba(255,215,0,0.12);font-size:12px;font-weight:600;color:var(--gold);cursor:pointer;transition:all .2s;-webkit-tap-highlight-color:transparent;white-space:nowrap}
    .chip:active{transform:scale(.95);background:rgba(255,215,0,0.12);border-color:rgba(255,215,0,.25)}

    /* â•â•â• MESSAGES â•â•â• */
    .row{display:flex;gap:8px;max-width:88%;animation:msgPop .35s cubic-bezier(.22,1,.36,1)}
    @keyframes msgPop{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
    .row-user{align-self:flex-end;flex-direction:row-reverse}
    .row-bos{align-self:flex-start}
    .av{width:28px;height:28px;border-radius:50%;flex-shrink:0;margin-top:2px;display:flex;align-items:center;justify-content:center;font-size:14px}
    .av-bos{background:linear-gradient(135deg,rgba(255,215,0,0.2),rgba(255,107,53,0.15));border:1px solid rgba(255,215,0,0.15)}
    .av-user{background:linear-gradient(135deg,rgba(0,217,165,0.15),rgba(0,206,209,0.1));border:1px solid rgba(0,217,165,0.15)}
    .bub{padding:10px 14px;border-radius:16px;font-size:14px;line-height:1.6;font-weight:400;word-wrap:break-word;overflow-wrap:break-word}
    .bub-bos{background:var(--card);border:1px solid var(--border);border-bottom-left-radius:4px;color:var(--text)}
    .bub-user{background:linear-gradient(135deg,rgba(255,215,0,0.15),rgba(255,107,53,0.1));border:1px solid rgba(255,215,0,0.12);border-bottom-right-radius:4px;color:var(--text)}
    .bub-err{background:rgba(255,23,68,0.1);border:1px solid rgba(255,23,68,0.15);border-bottom-left-radius:4px;color:#FF8A80}
    .dots{display:flex;align-items:center;gap:4px;padding:12px 16px}
    .dot{width:7px;height:7px;border-radius:50%;background:var(--gold);opacity:.4;animation:bounce 1.4s ease-in-out infinite}
    .dot:nth-child(2){animation-delay:.2s}
    .dot:nth-child(3){animation-delay:.4s}
    @keyframes bounce{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-6px);opacity:1}}

    /* â•â•â• INPUT â•â•â• */
    .bar{padding:10px 12px;padding-bottom:max(10px,env(safe-area-inset-bottom));background:rgba(5,5,8,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-top:1px solid var(--border);position:relative;z-index:10;flex-shrink:0}
    .bar-row{display:flex;gap:8px;align-items:flex-end;max-width:520px;margin:0 auto}
    .bar-input{flex:1;min-height:44px;max-height:120px;padding:10px 14px;border-radius:14px;border:1.5px solid var(--border);background:var(--card);color:var(--text);font-family:var(--sans);font-size:15px;font-weight:500;resize:none;outline:none;line-height:1.4;transition:border-color .2s;-webkit-appearance:none}
    .bar-input::placeholder{color:rgba(255,255,255,.3);font-weight:400}
    .bar-input:focus{border-color:rgba(255,215,0,.25)}
    .bar-input:disabled{opacity:.4}
    .bar-send{width:44px;height:44px;border-radius:14px;border:none;background:linear-gradient(135deg,var(--gold),var(--orange));color:var(--dark);font-size:18px;font-weight:800;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all .2s;-webkit-tap-highlight-color:transparent;cursor:pointer;box-shadow:0 2px 12px rgba(255,215,0,0.2)}
    .bar-send:active{transform:scale(.9)}
    .bar-send:disabled{opacity:.3;transform:none;cursor:default;box-shadow:none}
    .bar-send svg{width:20px;height:20px;fill:none;stroke:currentColor;stroke-width:2.5;stroke-linecap:round;stroke-linejoin:round}

    /* â•â•â• DEBUG BAR â•â•â• */
    .dbg{display:none;position:fixed;top:0;left:0;right:0;z-index:200;padding:6px 12px;font-size:10px;font-family:monospace;text-align:center;animation:fadeUp .3s ease}
    .dbg.on{display:block}
    .dbg-ok{background:rgba(0,217,165,.15);color:#6EE7B7;border-bottom:1px solid rgba(0,217,165,.2)}
    .dbg-err{background:rgba(255,23,68,.15);color:#FF8A80;border-bottom:1px solid rgba(255,23,68,.2)}

    @media(max-width:420px){.hdr-name{font-size:16px}.hero-av{width:72px;height:72px;font-size:34px}.hero-title{font-size:24px}.bub{font-size:13.5px}}
    @media(max-height:500px){.hero{padding:12px}.hero-av{width:56px;height:56px;font-size:28px}.chips{margin-top:10px}}
    @media(min-width:600px){.row{max-width:75%}}
  </style>
</head>
<body class="en">
  <div class="bg"><div class="bg-grid"></div></div>

  <!-- â•â•â• HEADER â•â•â• -->
  <div class="hdr">
    <a href="/" class="hdr-back">â†</a>
    <div class="hdr-av">ğŸ¯</div>
    <div class="hdr-info">
      <div class="hdr-name">COACH BOS</div>
      <div class="hdr-status"><span class="hdr-dot"></span><span class="hdr-stat en">Game Ready</span><span class="hdr-stat es">Listo Pa'l Game</span></div>
    </div>
    <button class="hdr-lang" id="langBtn" onclick="toggleLang()">ES</button>
    <button class="hdr-share" id="shareBtn" onclick="shareCoach()">â†—</button>
  </div>

  <!-- â•â•â• CHAT AREA â•â•â• -->
  <div class="chat" id="chat"></div>

  <!-- â•â•â• INPUT BAR â•â•â• -->
  <div class="bar">
    <div class="bar-row">
      <textarea class="bar-input" id="inp" rows="1" placeholder="Ask Coach BOS..." enterkeyhint="send"></textarea>
      <button class="bar-send" id="sendBtn" onclick="doSend()" disabled>
        <svg viewBox="0 0 24 24"><path d="M22 2L11 13"/><path d="M22 2L15 22L11 13L2 9L22 2Z"/></svg>
      </button>
    </div>
  </div>

  <!-- â•â•â• DEBUG BAR â•â•â• -->
  <div class="dbg" id="dbg"></div>

  <script>
  (function(){
    /* â•â•â• DOM â•â•â• */
    var chat=document.getElementById('chat');
    var inp=document.getElementById('inp');
    var sendBtn=document.getElementById('sendBtn');
    var dbg=document.getElementById('dbg');
    var langBtn=document.getElementById('langBtn');

    /* â•â•â• STATE â•â•â• */
    var hist=[];
    var busy=false;
    var lang='en';

    /* â•â•â• LANG â•â•â• */
    function setLang(l){
      lang=l;
      document.body.className=l;
      langBtn.textContent=l==='en'?'ES':'EN';
      inp.placeholder=l==='en'?'Ask Coach BOS...':'PregÃºntale al Coach BOS...';
      try{localStorage.setItem('bos-lang',l);}catch(e){}
    }
    window.toggleLang=function(){setLang(lang==='en'?'es':'en');};

    /* â•â•â• DEBUG â•â•â• */
    function debug(msg,ok){
      dbg.textContent=msg;
      dbg.className='dbg on '+(ok?'dbg-ok':'dbg-err');
      if(ok)setTimeout(function(){dbg.classList.remove('on')},3000);
    }

    /* â•â•â• WELCOME â•â•â• */
    function showWelcome(){
      var chipsEN=[
        {t:'ğŸ“Š My Stats',q:'Show my stats'},
        {t:'ğŸ¯ Training Plan',q:'Create a training plan for me'},
        {t:'ğŸ† Leaderboard',q:'Show the leaderboard'},
        {t:'ğŸ§  How It Works',q:'How does BOS training work?'},
        {t:'âš¡ Quick Warmup',q:'Give me a quick warmup routine'}
      ];
      var chipsES=[
        {t:'ğŸ“Š Mis Stats',q:'MuÃ©strame mis estadÃ­sticas'},
        {t:'ğŸ¯ Plan de Entrenamiento',q:'Crea un plan de entrenamiento para mÃ­'},
        {t:'ğŸ† Leaderboard',q:'MuÃ©strame el leaderboard'},
        {t:'ğŸ§  CÃ³mo Funciona',q:'Â¿CÃ³mo funciona el entrenamiento BOS?'},
        {t:'âš¡ Calentamiento',q:'Dame una rutina rÃ¡pida de calentamiento'}
      ];
      var chips=lang==='es'?chipsES:chipsEN;
      var html='<div class="hero">'
        +'<div class="hero-av">ğŸ¯</div>'
        +'<div class="hero-title"><span class="gold">COACH</span> BOS</div>'
        +'<div class="hero-coached">GET COACHED.<span class="tm">â„¢</span></div>'
        +'<div class="hero-sub en">Your AI sideline coach. Ask me about your performance, training plans, or anything esports. I\'m here to make you better.</div>'
        +'<div class="hero-sub es">Tu coach AI de banquillo. PregÃºntame sobre tu rendimiento, planes de entrenamiento, o cualquier cosa de esports. Estoy aquÃ­ pa\' hacerte mejor.</div>'
        +'<div class="chips">';
      chips.forEach(function(c){
        html+='<div class="chip" onclick="tapChip(\''+c.q.replace(/'/g,"\\'")+'\')">'+c.t+'</div>';
      });
      html+='</div></div>';
      chat.innerHTML=html;
    }

    /* â•â•â• MESSAGES â•â•â• */
    function clearHero(){var h=chat.querySelector('.hero');if(h)h.remove();}

    function addBub(who,text,isErr){
      clearHero();
      var r=document.createElement('div');
      r.className='row row-'+who;
      var a=document.createElement('div');
      a.className='av av-'+who;
      a.textContent=who==='bos'?'ğŸ¯':'ğŸ®';
      var b=document.createElement('div');
      b.className='bub '+(isErr?'bub-err':('bub-'+who));
      b.textContent=text;
      r.appendChild(a);r.appendChild(b);
      chat.appendChild(r);
      chat.scrollTop=chat.scrollHeight;
    }

    function addDots(){
      clearHero();
      var r=document.createElement('div');
      r.className='row row-bos';r.id='dots';
      var a=document.createElement('div');
      a.className='av av-bos';a.textContent='ğŸ¯';
      var b=document.createElement('div');
      b.className='bub bub-bos dots';
      b.innerHTML='<span class="dot"></span><span class="dot"></span><span class="dot"></span>';
      r.appendChild(a);r.appendChild(b);
      chat.appendChild(r);
      chat.scrollTop=chat.scrollHeight;
    }
    function killDots(){var d=document.getElementById('dots');if(d)d.remove();}

    /* â•â•â• INPUT â•â•â• */
    inp.addEventListener('input',function(){
      this.style.height='auto';
      this.style.height=Math.min(this.scrollHeight,120)+'px';
      sendBtn.disabled=!this.value.trim();
    });
    inp.addEventListener('keydown',function(e){
      if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();if(!busy&&this.value.trim())doSend();}
    });

    window.tapChip=function(q){
      inp.value=q;
      sendBtn.disabled=false;
      doSend();
    };

    /* â•â•â• SEND â•â•â• */
    window.doSend=async function(){
      var text=inp.value.trim();
      if(!text||busy)return;

      busy=true;
      sendBtn.disabled=true;
      inp.value='';
      inp.style.height='auto';

      addBub('user',text);
      hist.push({role:'user',content:text});

      addDots();

      try{
        debug('Calling Coach BOS...',true);
        var ctrl=new AbortController();
        var tmout=setTimeout(function(){ctrl.abort();},30000);

        var res=await fetch('https://bos-agent-server.onrender.com/api/coach/chat',{
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({message:text,history:hist.slice(-20),lang:lang}),
          signal:ctrl.signal
        });

        clearTimeout(tmout);
        killDots();

        if(!res.ok){
          var errText='HTTP '+res.status;
          try{var errData=await res.json();errText=errData.error||errText;}catch(e){}
          debug('Error: '+errText,false);
          var errMsgEN='Had a timeout. Try again â€” I\'m warming back up. âš¡';
          var errMsgES='Se me fue el tiempo. Intenta de nuevo â€” estoy calentando. âš¡';
          addBub('bos',lang==='es'?errMsgES:errMsgEN,true);
          busy=false;sendBtn.disabled=false;return;
        }

        var data=await res.json();
        var reply=data.reply||'...';
        debug('âœ… Coach responded',true);
        addBub('bos',reply);
        hist.push({role:'assistant',content:reply});
        if(hist.length>40)hist=hist.slice(-40);

      }catch(e){
        killDots();
        if(e.name==='AbortError'){
          debug('Timeout â€” 30s no response',false);
          var toEN='I\'m warming up from cold start. Give me 10 seconds and try again. âš¡';
          var toES='Estoy calentando del cold start. Dame 10 segundos e intenta de nuevo. âš¡';
          addBub('bos',lang==='es'?toES:toEN,true);
        }else{
          debug('Error: '+e.message,false);
          var ceEN='Connection error ('+e.message+'). Try again. âš¡';
          var ceES='Error de conexiÃ³n ('+e.message+'). Intenta de nuevo. âš¡';
          addBub('bos',lang==='es'?ceES:ceEN,true);
        }
      }

      busy=false;
      sendBtn.disabled=!inp.value.trim();
      inp.focus();
    };

    /* â•â•â• SHARE â•â•â• */
    window.shareCoach=function(){
      var shareData={title:'Coach BOS â€” GET COACHED.â„¢',text:'Talk to Coach BOS â€” your AI sideline coach for esports. GET COACHED.â„¢',url:window.location.href};
      if(navigator.share){navigator.share(shareData).catch(function(){});}
      else{navigator.clipboard.writeText('Coach BOS â€” AI Esports Coach. GET COACHED.â„¢ '+window.location.href).then(function(){var b=document.getElementById('shareBtn');b.textContent='âœ“';b.style.color='var(--teal)';setTimeout(function(){b.textContent='â†—';b.style.color='';},2000);}).catch(function(){});}
    };

    /* â•â•â• BOOT â•â•â• */
    var savedLang;
    try{savedLang=localStorage.getItem('bos-lang');}catch(e){}
    setLang(savedLang||'en');
    showWelcome();
    if(window.innerWidth>600)inp.focus();

  })();
  </script>
</body>
</html>
